FROM node:20-alpine

WORKDIR /app

COPY . .

WORKDIR /app/Shared
RUN npm install && npm run build

WORKDIR /app/Offline
RUN npm install && npm run build

WORKDIR /app/Online
RUN npm install && npm run build

ENTRYPOINT ["bash", "init.sh"]
# cp -r /app/Offline/dist/* /pong-dist/Offline
# cp -r /app/Online/dist/* /pong-dist/Online
# cp -r /app/Assets /pong-dist/Assets

CMD ["tail -f /dev/null"]
# node run the server